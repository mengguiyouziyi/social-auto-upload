<template>
  <div class="content-analysis">
    <!-- Â§¥ÈÉ®Êìç‰ΩúÂå∫ -->
    <div class="analysis-header">
      <div class="header-left">
        <h2>ÂÜÖÂÆπÂàÜÊûê‰∏é‰ºòÂåñ</h2>
        <el-breadcrumb separator="/">
          <el-breadcrumb-item :to="{ path: '/' }">Â∑•‰ΩúÂè∞</el-breadcrumb-item>
          <el-breadcrumb-item>ÂÜÖÂÆπÂàÜÊûê</el-breadcrumb-item>
        </el-breadcrumb>
      </div>
      <div class="header-actions">
        <el-button type="primary" @click="startNewAnalysis">
          <el-icon><Refresh /></el-icon>ÂºÄÂßãÂàÜÊûê
        </el-button>
        <el-button @click="exportAnalysisReport">
          <el-icon><Download /></el-icon>ÂØºÂá∫Êä•Âëä
        </el-button>
      </div>
    </div>

    <!-- ÂàÜÊûêÊ¶ÇËßà -->
    <div class="analysis-overview">
      <el-row :gutter="20">
        <el-col :span="6">
          <el-card class="metric-card">
            <div class="metric-content">
              <div class="metric-icon analysis-icon">
                <el-icon><DataAnalysis /></el-icon>
              </div>
              <div class="metric-info">
                <div class="metric-value">{{ analysisStats.totalAnalyzed }}</div>
                <div class="metric-label">Â∑≤ÂàÜÊûêÂÜÖÂÆπ</div>
                <div class="metric-trend">
                  <span class="trend-up">+12.5%</span>
                  ËæÉ‰∏äÂë®
                </div>
              </div>
            </div>
          </el-card>
        </el-col>
        <el-col :span="6">
          <el-card class="metric-card">
            <div class="metric-content">
              <div class="metric-icon optimization-icon">
                <el-icon><MagicStick /></el-icon>
              </div>
              <div class="metric-info">
                <div class="metric-value">{{ analysisStats.optimizationScore }}</div>
                <div class="metric-label">‰ºòÂåñÂæóÂàÜ</div>
                <div class="metric-trend">
                  <span class="trend-up">+8.3%</span>
                  ÊèêÂçáÁ©∫Èó¥
                </div>
              </div>
            </div>
          </el-card>
        </el-col>
        <el-col :span="6">
          <el-card class="metric-card">
            <div class="metric-content">
              <div class="metric-icon insight-icon">
                <el-icon><Sunny /></el-icon>
              </div>
              <div class="metric-info">
                <div class="metric-value">{{ analysisStats.insightsGenerated }}</div>
                <div class="metric-label">Ê¥ûÂØüÂª∫ËÆÆ</div>
                <div class="metric-trend">
                  <span class="trend-up">+15.2%</span>
                  Êñ∞Âª∫ËÆÆ
                </div>
              </div>
            </div>
          </el-card>
        </el-col>
        <el-col :span="6">
          <el-card class="metric-card">
            <div class="metric-content">
              <div class="metric-icon performance-icon">
                <el-icon><TrendCharts /></el-icon>
              </div>
              <div class="metric-info">
                <div class="metric-value">{{ analysisStats.performanceBoost }}%</div>
                <div class="metric-label">ÊÄßËÉΩÊèêÂçá</div>
                <div class="metric-trend">
                  <span class="trend-up">+5.7%</span>
                  È¢ÑÊúüÊèêÂçá
                </div>
              </div>
            </div>
          </el-card>
        </el-col>
      </el-row>
    </div>

    <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫ -->
    <div class="analysis-content">
      <el-row :gutter="20">
        <!-- Â∑¶‰æßÂàÜÊûêÈù¢Êùø -->
        <el-col :span="16">
          <!-- ÂÜÖÂÆπË¥®ÈáèÂàÜÊûê -->
          <el-card class="analysis-card">
            <template #header>
              <div class="card-header">
                <h3>ÂÜÖÂÆπË¥®ÈáèÂàÜÊûê</h3>
                <div class="header-actions">
                  <el-select v-model="selectedContentType" @change="analyzeContent" placeholder="ÂÜÖÂÆπÁ±ªÂûã">
                    <el-option label="ÂÖ®ÈÉ®ÂÜÖÂÆπ" value="all" />
                    <el-option label="Áü≠ËßÜÈ¢ë" value="video" />
                    <el-option label="ÂõæÊñá" value="image" />
                    <el-option label="ÊñáÊ°à" value="text" />
                  </el-select>
                  <el-date-picker
                    v-model="dateRange"
                    type="daterange"
                    range-separator="Ëá≥"
                    start-placeholder="ÂºÄÂßãÊó•Êúü"
                    end-placeholder="ÁªìÊùüÊó•Êúü"
                    @change="analyzeContent"
                  />
                </div>
              </div>
            </template>

            <div class="quality-analysis">
              <div class="analysis-tabs">
                <el-tabs v-model="activeAnalysisTab">
                  <el-tab-pane label="Êï¥‰ΩìËØÑÂàÜ" name="overall">
                    <div class="score-breakdown">
                      <div class="score-chart">
                        <div class="radar-chart" ref="radarChart"></div>
                      </div>
                      <div class="score-details">
                        <div class="score-item">
                          <span class="label">ÂÜÖÂÆπÂê∏ÂºïÂäõ</span>
                          <div class="score-bar">
                            <div class="score-fill" :style="{width: qualityScores.engagement + '%'}"></div>
                          </div>
                          <span class="value">{{ qualityScores.engagement }}%</span>
                        </div>
                        <div class="score-item">
                          <span class="label">‰ø°ÊÅØ‰ª∑ÂÄº</span>
                          <div class="score-bar">
                            <div class="score-fill" :style="{width: qualityScores.value + '%'}"></div>
                          </div>
                          <span class="value">{{ qualityScores.value }}%</span>
                        </div>
                        <div class="score-item">
                          <span class="label">ÂàõÊÑèÁã¨ÁâπÊÄß</span>
                          <div class="score-bar">
                            <div class="score-fill" :style="{width: qualityScores.creativity + '%'}"></div>
                          </div>
                          <span class="value">{{ qualityScores.creativity }}%</span>
                        </div>
                        <div class="score-item">
                          <span class="label">ÁõÆÊ†áÂ•ëÂêàÂ∫¶</span>
                          <div class="score-bar">
                            <div class="score-fill" :style="{width: qualityScores.relevance + '%'}"></div>
                          </div>
                          <span class="value">{{ qualityScores.relevance }}%</span>
                        </div>
                        <div class="score-item">
                          <span class="label">‰º†Êí≠ÊΩúÂäõ</span>
                          <div class="score-bar">
                            <div class="score-fill" :style="{width: qualityScores.virality + '%'}"></div>
                          </div>
                          <span class="value">{{ qualityScores.virality }}%</span>
                        </div>
                      </div>
                    </div>
                  </el-tab-pane>

                  <el-tab-pane label="ÂÖ≥ÈîÆËØçÂàÜÊûê" name="keywords">
                    <div class="keyword-analysis">
                      <div class="keyword-cloud">
                        <div
                          v-for="(keyword, index) in keywordCloud"
                          :key="index"
                          class="keyword-item"
                          :style="{fontSize: keyword.size + 'px', color: keyword.color}"
                        >
                          {{ keyword.word }}
                        </div>
                      </div>
                      <div class="keyword-table">
                        <el-table :data="topKeywords" style="width: 100%">
                          <el-table-column prop="keyword" label="ÂÖ≥ÈîÆËØç" width="150" />
                          <el-table-column prop="frequency" label="Âá∫Áé∞È¢ëÁéá" width="120" />
                          <el-table-column prop="engagement" label="‰∫íÂä®Áéá" width="120" />
                          <el-table-column prop="sentiment" label="ÊÉÖÊÑüÂÄæÂêë" width="120">
                            <template #default="scope">
                              <el-tag :type="getSentimentType(scope.row.sentiment)">
                                {{ scope.row.sentiment }}
                              </el-tag>
                            </template>
                          </el-table-column>
                          <el-table-column prop="trend" label="Ë∂ãÂäø">
                            <template #default="scope">
                              <el-icon :class="scope.row.trend > 0 ? 'trend-up' : 'trend-down'">
                                <ArrowUp v-if="scope.row.trend > 0" />
                                <ArrowDown v-else />
                              </el-icon>
                              {{ Math.abs(scope.row.trend) }}%
                            </template>
                          </el-table-column>
                        </el-table>
                      </div>
                    </div>
                  </el-tab-pane>

                  <el-tab-pane label="ÊÉÖÊÑüÂàÜÊûê" name="sentiment">
                    <div class="sentiment-analysis">
                      <div class="sentiment-chart">
                        <div class="chart-container" ref="sentimentChart"></div>
                      </div>
                      <div class="sentiment-details">
                        <div class="sentiment-item positive">
                          <div class="sentiment-icon">üòä</div>
                          <div class="sentiment-info">
                            <div class="sentiment-label">Ê≠£Èù¢ÊÉÖÊÑü</div>
                            <div class="sentiment-value">{{ sentimentData.positive }}%</div>
                            <div class="sentiment-desc">Áî®Êà∑ÂèçÂìçÁßØÊûÅ</div>
                          </div>
                        </div>
                        <div class="sentiment-item neutral">
                          <div class="sentiment-icon">üòê</div>
                          <div class="sentiment-info">
                            <div class="sentiment-label">‰∏≠ÊÄßÊÉÖÊÑü</div>
                            <div class="sentiment-value">{{ sentimentData.neutral }}%</div>
                            <div class="sentiment-desc">ÊÄÅÂ∫¶‰∏≠Á´ãÂÆ¢ËßÇ</div>
                          </div>
                        </div>
                        <div class="sentiment-item negative">
                          <div class="sentiment-icon">üòû</div>
                          <div class="sentiment-info">
                            <div class="sentiment-label">Ë¥üÈù¢ÊÉÖÊÑü</div>
                            <div class="sentiment-value">{{ sentimentData.negative }}%</div>
                            <div class="sentiment-desc">ÈúÄË¶ÅÊîπËøõ‰ºòÂåñ</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </el-tab-pane>
                </el-tabs>
              </div>
            </div>
          </el-card>

          <!-- Á´ûÂìÅÂàÜÊûê -->
          <el-card class="analysis-card">
            <template #header>
              <div class="card-header">
                <h3>Á´ûÂìÅÂØπÊØîÂàÜÊûê</h3>
                <el-button type="primary" size="small" @click="refreshCompetitorAnalysis">
                  <el-icon><Refresh /></el-icon>Âà∑Êñ∞ÂàÜÊûê
                </el-button>
              </div>
            </template>

            <div class="competitor-analysis">
              <div class="competitor-grid">
                <div
                  v-for="competitor in competitors"
                  :key="competitor.id"
                  class="competitor-card"
                >
                  <div class="competitor-header">
                    <img :src="competitor.avatar" :alt="competitor.name" class="competitor-avatar">
                    <div class="competitor-info">
                      <h4>{{ competitor.name }}</h4>
                      <p>{{ competitor.category }}</p>
                    </div>
                  </div>
                  <div class="competitor-metrics">
                    <div class="metric-row">
                      <span class="metric-label">Á≤â‰∏ùÊï∞</span>
                      <span class="metric-value">{{ competitor.followers }}</span>
                    </div>
                    <div class="metric-row">
                      <span class="metric-label">Âπ≥Âùá‰∫íÂä®</span>
                      <span class="metric-value">{{ competitor.avgEngagement }}%</span>
                    </div>
                    <div class="metric-row">
                      <span class="metric-label">ÂèëÂ∏ÉÈ¢ëÁéá</span>
                      <span class="metric-value">{{ competitor.postFrequency }}/Â§©</span>
                    </div>
                  </div>
                  <div class="competitor-analysis">
                    <div class="analysis-item">
                      <span class="analysis-label">‰ºòÂäø</span>
                      <p class="analysis-value">{{ competitor.strengths }}</p>
                    </div>
                    <div class="analysis-item">
                      <span class="analysis-label">Âä£Âäø</span>
                      <p class="analysis-value">{{ competitor.weaknesses }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </el-card>
        </el-col>

        <!-- Âè≥‰æßÂª∫ËÆÆÈù¢Êùø -->
        <el-col :span="8">
          <!-- AI‰ºòÂåñÂª∫ËÆÆ -->
          <el-card class="suggestions-card">
            <template #header>
              <div class="card-header">
                <h3>AI‰ºòÂåñÂª∫ËÆÆ</h3>
                <el-button type="primary" size="small" @click="generateNewSuggestions">
                  <el-icon><MagicStick /></el-icon>ÁîüÊàêÂª∫ËÆÆ
                </el-button>
              </div>
            </template>

            <div class="suggestions-list">
              <div
                v-for="(suggestion, index) in optimizationSuggestions"
                :key="index"
                class="suggestion-item"
                :class="suggestion.priority"
              >
                <div class="suggestion-header">
                  <div class="suggestion-icon">
                    <el-icon>
                      <Sunny v-if="suggestion.priority === 'high'" />
                      <Warning v-else-if="suggestion.priority === 'medium'" />
                      <InfoFilled v-else />
                    </el-icon>
                  </div>
                  <div class="suggestion-title">
                    <h4>{{ suggestion.title }}</h4>
                    <span class="suggestion-type">{{ suggestion.type }}</span>
                  </div>
                </div>
                <div class="suggestion-content">
                  <p>{{ suggestion.description }}</p>
                  <div class="suggestion-impact">
                    <span class="impact-label">È¢ÑÊúüÂΩ±Âìç:</span>
                    <div class="impact-meter">
                      <div
                        class="impact-fill"
                        :style="{width: suggestion.impact + '%'}"
                      ></div>
                    </div>
                    <span class="impact-value">{{ suggestion.impact }}%</span>
                  </div>
                </div>
                <div class="suggestion-actions">
                  <el-button size="small" type="primary" @click="applySuggestion(suggestion)">
                    Â∫îÁî®Âª∫ËÆÆ
                  </el-button>
                  <el-button size="small" @click="dismissSuggestion(index)">
                    ÂøΩÁï•
                  </el-button>
                </div>
              </div>
            </div>
          </el-card>

          <!-- ÂÜÖÂÆπ‰ºòÂåñÂ∑•ÂÖ∑ -->
          <el-card class="tools-card">
            <template #header>
              <div class="card-header">
                <h3>‰ºòÂåñÂ∑•ÂÖ∑</h3>
              </div>
            </template>

            <div class="tools-list">
              <div class="tool-item" @click="openTool('title')">
                <div class="tool-icon">
                  <el-icon><EditPen /></el-icon>
                </div>
                <div class="tool-info">
                  <h4>Ê†áÈ¢ò‰ºòÂåñÂô®</h4>
                  <p>‰ºòÂåñÊ†áÈ¢òÂê∏ÂºïÂäõÂíåÁÇπÂáªÁéá</p>
                </div>
              </div>
              <div class="tool-item" @click="openTool('hashtag')">
                <div class="tool-icon">
                  <el-icon><PriceTag /></el-icon>
                </div>
                <div class="tool-info">
                  <h4>Ê†áÁ≠æÊé®Ëçê</h4>
                  <p>Êô∫ËÉΩÊé®ËçêÁÉ≠Èó®Ê†áÁ≠æ</p>
                </div>
              </div>
              <div class="tool-item" @click="openTool('timing')">
                <div class="tool-icon">
                  <el-icon><Timer /></el-icon>
                </div>
                <div class="tool-info">
                  <h4>ÂèëÂ∏ÉÊó∂Êú∫</h4>
                  <p>ÂàÜÊûêÊúÄ‰Ω≥ÂèëÂ∏ÉÊó∂Èó¥</p>
                </div>
              </div>
              <div class="tool-item" @click="openTool('format')">
                <div class="tool-icon">
                  <el-icon><Document /></el-icon>
                </div>
                <div class="tool-info">
                  <h4>Ê†ºÂºè‰ºòÂåñ</h4>
                  <p>ÂÜÖÂÆπÊ†ºÂºèÂíåÁªìÊûÑË∞ÉÊï¥</p>
                </div>
              </div>
            </div>
          </el-card>

          <!-- ÂàÜÊûêÊä•Âëä -->
          <el-card class="report-card">
            <template #header>
              <div class="card-header">
                <h3>ÂàÜÊûêÊä•Âëä</h3>
                <el-button type="primary" size="small" @click="generateReport">
                  <el-icon><Document /></el-icon>ÁîüÊàêÊä•Âëä
                </el-button>
              </div>
            </template>

            <div class="report-list">
              <div
                v-for="report in analysisReports"
                :key="report.id"
                class="report-item"
              >
                <div class="report-info">
                  <h4>{{ report.title }}</h4>
                  <p>{{ report.date }}</p>
                </div>
                <div class="report-actions">
                  <el-button size="small" @click="viewReport(report)">
                    Êü•Áúã
                  </el-button>
                  <el-button size="small" @click="downloadReport(report)">
                    ‰∏ãËΩΩ
                  </el-button>
                </div>
              </div>
            </div>
          </el-card>
        </el-col>
      </el-row>
    </div>

    <!-- Â∑•ÂÖ∑ÂØπËØùÊ°Ü -->
    <el-dialog
      v-model="toolDialog.visible"
      :title="toolDialog.title"
      width="600px"
    >
      <div class="tool-content">
        <div v-if="toolDialog.type === 'title'" class="title-optimizer">
          <el-form :model="titleForm" label-width="100px">
            <el-form-item label="ÂéüÊ†áÈ¢ò">
              <el-input
                v-model="titleForm.original"
                type="textarea"
                :rows="2"
                placeholder="ËØ∑ËæìÂÖ•ÂéüÊ†áÈ¢ò"
              />
            </el-form-item>
            <el-form-item label="ÂÜÖÂÆπÁ±ªÂûã">
              <el-select v-model="titleForm.contentType" placeholder="ÈÄâÊã©ÂÜÖÂÆπÁ±ªÂûã">
                <el-option label="Áü≠ËßÜÈ¢ë" value="video" />
                <el-option label="ÂõæÊñá" value="image" />
                <el-option label="ÊñáÁ´†" value="article" />
              </el-select>
            </el-form-item>
            <el-form-item label="ÁõÆÊ†áÂèó‰ºó">
              <el-input v-model="titleForm.targetAudience" placeholder="ÊèèËø∞ÁõÆÊ†áÂèó‰ºó" />
            </el-form-item>
          </el-form>
          <div class="optimization-results">
            <h4>‰ºòÂåñÂª∫ËÆÆ</h4>
            <div class="suggestion-list">
              <div
                v-for="(suggestion, index) in titleOptimizations"
                :key="index"
                class="title-suggestion"
              >
                <div class="suggestion-text">{{ suggestion.text }}</div>
                <div class="suggestion-score">
                  <span class="score-label">ËØÑÂàÜ:</span>
                  <span class="score-value">{{ suggestion.score }}</span>
                </div>
                <el-button size="small" type="primary" @click="useTitleSuggestion(suggestion)">
                  ‰ΩøÁî®Ê≠§Ê†áÈ¢ò
                </el-button>
              </div>
            </div>
          </div>
        </div>

        <div v-else-if="toolDialog.type === 'hashtag'" class="hashtag-recommender">
          <el-form :model="hashtagForm" label-width="100px">
            <el-form-item label="ÂÜÖÂÆπÊèèËø∞">
              <el-input
                v-model="hashtagForm.description"
                type="textarea"
                :rows="3"
                placeholder="ÊèèËø∞ÊÇ®ÁöÑÂÜÖÂÆπ‰∏ªÈ¢ò"
              />
            </el-form-item>
            <el-form-item label="ÂÜÖÂÆπÁ±ªÂûã">
              <el-select v-model="hashtagForm.contentType" placeholder="ÈÄâÊã©ÂÜÖÂÆπÁ±ªÂûã">
                <el-option label="Áü≠ËßÜÈ¢ë" value="video" />
                <el-option label="ÂõæÊñá" value="image" />
                <el-option label="ÊñáÁ´†" value="article" />
              </el-select>
            </el-form-item>
          </el-form>
          <div class="hashtag-results">
            <h4>Êé®ËçêÊ†áÁ≠æ</h4>
            <div class="hashtag-cloud">
              <el-tag
                v-for="tag in recommendedHashtags"
                :key="tag.name"
                :type="getTagType(tag.popularity)"
                class="hashtag-tag"
                @click="selectHashtag(tag)"
              >
                #{{ tag.name }}
                <span class="tag-popularity">{{ tag.popularity }}</span>
              </el-tag>
            </div>
          </div>
        </div>

        <div v-else-if="toolDialog.type === 'timing'" class="timing-analyzer">
          <div class="timing-chart">
            <div class="chart-container" ref="timingChart"></div>
          </div>
          <div class="timing-recommendations">
            <h4>Êé®ËçêÂèëÂ∏ÉÊó∂Èó¥</h4>
            <div class="time-slots">
              <div
                v-for="slot in recommendedTimes"
                :key="slot.time"
                class="time-slot"
              >
                <div class="time">{{ slot.time }}</div>
                <div class="engagement">{{ slot.engagement }}% ‰∫íÂä®Áéá</div>
                <div class="reason">{{ slot.reason }}</div>
              </div>
            </div>
          </div>
        </div>

        <div v-else-if="toolDialog.type === 'format'" class="format-optimizer">
          <el-form :model="formatForm" label-width="100px">
            <el-form-item label="ÂÜÖÂÆπÁ±ªÂûã">
              <el-select v-model="formatForm.contentType" placeholder="ÈÄâÊã©ÂÜÖÂÆπÁ±ªÂûã">
                <el-option label="Áü≠ËßÜÈ¢ë" value="video" />
                <el-option label="ÂõæÊñá" value="image" />
                <el-option label="ÊñáÁ´†" value="article" />
              </el-select>
            </el-form-item>
            <el-form-item label="Âπ≥Âè∞">
              <el-select v-model="formatForm.platform" placeholder="ÈÄâÊã©ÂèëÂ∏ÉÂπ≥Âè∞">
                <el-option label="ÊäñÈü≥" value="douyin" />
                <el-option label="Âø´Êâã" value="kuaishou" />
                <el-option label="Â∞èÁ∫¢‰π¶" value="xiaohongshu" />
                <el-option label="ÂæÆÂçö" value="weibo" />
              </el-select>
            </el-form-item>
          </el-form>
          <div class="format-recommendations">
            <h4>Ê†ºÂºèÂª∫ËÆÆ</h4>
            <div class="format-tips">
              <div
                v-for="tip in formatTips"
                :key="tip.id"
                class="format-tip"
              >
                <div class="tip-icon">
                  <el-icon><Sunny /></el-icon>
                </div>
                <div class="tip-content">
                  <h5>{{ tip.title }}</h5>
                  <p>{{ tip.description }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <template #footer>
        <el-button @click="toolDialog.visible = false">ÂÖ≥Èó≠</el-button>
      </template>
    </el-dialog>
  </div>
</template>

<script setup>
import { ref, reactive, onMounted, nextTick } from 'vue'
import { ElMessage, ElMessageBox } from 'element-plus'
import {
  DataAnalysis, MagicStick, TrendCharts, Refresh, Download,
  ArrowUp, ArrowDown, EditPen, PriceTag, Timer, Document, Warning,
  InfoFilled, Sunny
} from '@element-plus/icons-vue'
import * as echarts from 'echarts'

// ÂìçÂ∫îÂºèÊï∞ÊçÆ
const analysisStats = ref({
  totalAnalyzed: 1234,
  optimizationScore: 85,
  insightsGenerated: 67,
  performanceBoost: 23
})

const selectedContentType = ref('all')
const dateRange = ref([])
const activeAnalysisTab = ref('overall')

const qualityScores = ref({
  engagement: 78,
  value: 85,
  creativity: 72,
  relevance: 90,
  virality: 65
})

const keywordCloud = ref([
  { word: 'ÁæéÈ£ü', size: 32, color: '#409EFF' },
  { word: 'Êé¢Â∫ó', size: 28, color: '#67C23A' },
  { word: 'Êé®Ëçê', size: 24, color: '#E6A23C' },
  { word: 'ÊïôÁ®ã', size: 20, color: '#F56C6C' },
  { word: 'ÁîüÊ¥ª', size: 18, color: '#909399' },
  { word: 'ÂàÜ‰∫´', size: 16, color: '#409EFF' },
  { word: '‰ΩìÈ™å', size: 14, color: '#67C23A' }
])

const topKeywords = ref([
  { keyword: 'ÁæéÈ£üÊé®Ëçê', frequency: 156, engagement: 12.5, sentiment: 'Ê≠£Èù¢', trend: 8.2 },
  { keyword: 'Êé¢Â∫óvlog', frequency: 142, engagement: 15.3, sentiment: 'Ê≠£Èù¢', trend: 12.1 },
  { keyword: 'ÁæéÈ£üÊïôÁ®ã', frequency: 128, engagement: 18.7, sentiment: '‰∏≠ÊÄß', trend: -2.3 },
  { keyword: 'ÁîüÊ¥ªÂàÜ‰∫´', frequency: 115, engagement: 9.8, sentiment: 'Ê≠£Èù¢', trend: 5.6 },
  { keyword: '‰ΩìÈ™åËØÑÊµã', frequency: 98, engagement: 22.1, sentiment: '‰∏≠ÊÄß', trend: 15.8 }
])

const sentimentData = ref({
  positive: 68,
  neutral: 25,
  negative: 7
})

const competitors = ref([
  {
    id: 1,
    name: 'ÁæéÈ£üËææ‰∫∫Â∞èÊùé',
    category: 'ÁæéÈ£üÂçö‰∏ª',
    avatar: 'https://placeholder.com/100x100',
    followers: '125‰∏á',
    avgEngagement: 8.5,
    postFrequency: 1.2,
    strengths: 'ÂÜÖÂÆπÂà∂‰ΩúÁ≤æËâØÔºåÁ≤â‰∏ù‰∫íÂä®ÁéáÈ´ò',
    weaknesses: 'Êõ¥Êñ∞È¢ëÁéá‰∏çÁ®≥ÂÆöÔºåÂÜÖÂÆπÂàõÊñ∞‰∏çË∂≥'
  },
  {
    id: 2,
    name: 'ÁîüÊ¥ªÁæéÂ≠¶ÂÆ∂',
    category: 'ÁîüÊ¥ªÊñπÂºè',
    avatar: 'https://placeholder.com/100x100',
    followers: '89‰∏á',
    avgEngagement: 12.3,
    postFrequency: 2.1,
    strengths: 'ÂÜÖÂÆπË¥®ÈáèÈ´òÔºåÂìÅÁâåÂêà‰ΩúÂ§ö',
    weaknesses: 'ÂïÜ‰∏öÂåñËøáÈáçÔºåÁî®Êà∑Á≤òÊÄß‰∏ãÈôç'
  }
])

const optimizationSuggestions = ref([
  {
    title: '‰ºòÂåñÊ†áÈ¢òÂÖ≥ÈîÆËØç',
    type: 'Ê†áÈ¢ò‰ºòÂåñ',
    priority: 'high',
    description: 'ÂΩìÂâçÊ†áÈ¢òÂÖ≥ÈîÆËØçÂØÜÂ∫¶Ëøá‰ΩéÔºåÂª∫ËÆÆÂ¢ûÂä†Áõ∏ÂÖ≥ÂÖ≥ÈîÆËØç‰ª•ÊèêÈ´òÊêúÁ¥¢ÊõùÂÖâÁéá',
    impact: 85
  },
  {
    title: 'Â¢ûÂä†‰∫íÂä®ÂºïÂØº',
    type: 'ÂÜÖÂÆπ‰ºòÂåñ',
    priority: 'medium',
    description: 'Âú®ÂÜÖÂÆπÁªìÂ∞æÂ¢ûÂä†‰∫íÂä®ÊÄßÈóÆÈ¢òÔºåÂèØ‰ª•ÊèêÈ´òÁî®Êà∑ÂèÇ‰∏éÂ∫¶',
    impact: 65
  },
  {
    title: 'Ë∞ÉÊï¥ÂèëÂ∏ÉÊó∂Èó¥',
    type: 'ÂèëÂ∏ÉÁ≠ñÁï•',
    priority: 'medium',
    description: 'Ê†πÊçÆÁî®Êà∑Ê¥ªË∑ÉÂ∫¶ÂàÜÊûêÔºåÂª∫ËÆÆÂ∞ÜÂèëÂ∏ÉÊó∂Èó¥Ë∞ÉÊï¥Ëá≥Êôö‰∏ä8-10ÁÇπ',
    impact: 45
  }
])

const analysisReports = ref([
  { id: 1, title: 'Âë®Â∫¶ÂÜÖÂÆπÂàÜÊûêÊä•Âëä', date: '2024-01-15' },
  { id: 2, title: 'Á´ûÂìÅÂØπÊØîÂàÜÊûê', date: '2024-01-08' },
  { id: 3, title: 'ÂÖ≥ÈîÆËØç‰ºòÂåñÂª∫ËÆÆ', date: '2024-01-01' }
])

const toolDialog = reactive({
  visible: false,
  title: '',
  type: ''
})

const titleForm = reactive({
  original: '',
  contentType: '',
  targetAudience: ''
})

const hashtagForm = reactive({
  description: '',
  contentType: ''
})

const formatForm = reactive({
  contentType: '',
  platform: ''
})

const titleOptimizations = ref([
  { text: '„ÄêÂøÖÁúã„ÄëËøôÂÆ∂ÈöêËóèÂú®Â∞èÂ∑∑ÁöÑÁ•û‰ªôÁæéÈ£üÔºå99%ÁöÑ‰∫∫‰∏çÁü•ÈÅìÔºÅ', score: 95 },
  { text: 'ÁæéÈ£üÊé¢Â∫óvlogÔºöÊÑèÂ§ñÂèëÁé∞ÁöÑÂÆùËóèÂ∫óÈì∫ÔºåÂë≥ÈÅìÁªù‰∫ÜÔºÅ', score: 88 },
  { text: 'Êú¨Âú∞ÁæéÈ£üÊé®ËçêÔºöËøôÂÆ∂Â∞èÂ∫óËÆ©ÊàëËøûÂéª3Â§©ÔºåÂ§™‰∏äÂ§¥‰∫ÜÔºÅ', score: 82 }
])

const recommendedHashtags = ref([
  { name: 'ÁæéÈ£üÊé¢Â∫ó', popularity: 'ÁÉ≠Èó®' },
  { name: 'ÁæéÈ£üÊé®Ëçê', popularity: 'ÁÉ≠Èó®' },
  { name: 'ÁæéÈ£üvlog', popularity: 'Êé®Ëçê' },
  { name: 'Êé¢Â∫óÊó•ËÆ∞', popularity: 'Êé®Ëçê' },
  { name: 'ÁæéÈ£üÂàÜ‰∫´', popularity: 'ÊôÆÈÄö' }
])

const recommendedTimes = ref([
  { time: '20:00-21:00', engagement: 18.5, reason: 'Áî®Êà∑‰∏ãÁè≠Âêé‰ºëÈó≤Êó∂Èó¥' },
  { time: '12:30-13:30', engagement: 15.2, reason: 'Âçà‰ºëÊó∂ÊÆµÔºåÁî®Êà∑Ê¥ªË∑É' },
  { time: '19:00-20:00', engagement: 12.8, reason: 'ÊôöÈ§êÊó∂Èó¥ÔºåËΩªÊùæÊµèËßà' }
])

const formatTips = ref([
  { id: 1, title: 'ËßÜÈ¢ëÊó∂ÈïøÊéßÂà∂', description: 'Âª∫ËÆÆÊéßÂà∂Âú®15-30ÁßíÔºåÂÆåÊí≠ÁéáÊõ¥È´ò' },
  { id: 2, title: 'Â∞ÅÈù¢‰ºòÂåñ', description: '‰ΩøÁî®È´òÊ∏ÖÂ∞ÅÈù¢ÔºåÊ∑ªÂä†ÊñáÂ≠óÊ†áÈ¢ò' },
  { id: 3, title: 'ËÉåÊôØÈü≥‰πê', description: 'ÈÄâÊã©ÁÉ≠Èó®BGMÔºåÊèêÈ´òÊé®ËçêÂá†Áéá' },
  { id: 4, title: 'Â≠óÂπïËÆæÁΩÆ', description: 'Ê∑ªÂä†ÈÜíÁõÆÂ≠óÂπïÔºåÊèêÈ´òËßÇÁúã‰ΩìÈ™å' }
])

// ÂõæË°®ÂÆû‰æã
let radarChart = null
let sentimentChart = null
let timingChart = null

// ÊñπÊ≥ïÂÆö‰πâ
const startNewAnalysis = () => {
  ElMessage.success('ÂºÄÂßãÊñ∞ÁöÑÂÜÖÂÆπÂàÜÊûê...')
  // Ê®°ÊãüÂàÜÊûêËøáÁ®ã
  setTimeout(() => {
    ElMessage.success('ÂÜÖÂÆπÂàÜÊûêÂÆåÊàêÔºÅ')
  }, 2000)
}

const exportAnalysisReport = () => {
  ElMessage.success('Ê≠£Âú®ÂØºÂá∫ÂàÜÊûêÊä•Âëä...')
  // Ê®°ÊãüÂØºÂá∫ËøáÁ®ã
  setTimeout(() => {
    ElMessage.success('ÂàÜÊûêÊä•ÂëäÂØºÂá∫ÊàêÂäüÔºÅ')
  }, 1500)
}

const analyzeContent = () => {
  ElMessage.info('Ê≠£Âú®ÂàÜÊûêÂÜÖÂÆπ...')
  // Ê®°ÊãüÂàÜÊûêËøáÁ®ã
  setTimeout(() => {
    updateCharts()
    ElMessage.success('ÂÜÖÂÆπÂàÜÊûêÊõ¥Êñ∞ÂÆåÊàêÔºÅ')
  }, 1000)
}

const getSentimentType = (sentiment) => {
  switch (sentiment) {
    case 'Ê≠£Èù¢': return 'success'
    case 'Ë¥üÈù¢': return 'danger'
    default: return 'info'
  }
}

const refreshCompetitorAnalysis = () => {
  ElMessage.info('Ê≠£Âú®Âà∑Êñ∞Á´ûÂìÅÂàÜÊûê...')
  // Ê®°ÊãüÂà∑Êñ∞ËøáÁ®ã
  setTimeout(() => {
    ElMessage.success('Á´ûÂìÅÂàÜÊûêÊõ¥Êñ∞ÂÆåÊàêÔºÅ')
  }, 1500)
}

const generateNewSuggestions = () => {
  ElMessage.info('Ê≠£Âú®ÁîüÊàêÊñ∞ÁöÑ‰ºòÂåñÂª∫ËÆÆ...')
  // Ê®°ÊãüÁîüÊàêËøáÁ®ã
  setTimeout(() => {
    const newSuggestion = {
      title: 'ÂÜÖÂÆπÂΩ¢ÂºèÂ§öÊ†∑Âåñ',
      type: 'ÂÜÖÂÆπÁ≠ñÁï•',
      priority: 'medium',
      description: 'Âª∫ËÆÆÂ∞ùËØïÊõ¥Â§öÊ†∑ÁöÑÂÜÖÂÆπÂΩ¢ÂºèÔºåÂ¶ÇÁõ¥Êí≠„ÄÅÈóÆÁ≠îÁ≠â',
      impact: 70
    }
    optimizationSuggestions.value.push(newSuggestion)
    ElMessage.success('Êñ∞ÁöÑ‰ºòÂåñÂª∫ËÆÆÂ∑≤ÁîüÊàêÔºÅ')
  }, 2000)
}

const applySuggestion = (suggestion) => {
  ElMessageBox.confirm(
    `Á°ÆÂÆöË¶ÅÂ∫îÁî®Âª∫ËÆÆ"${suggestion.title}"ÂêóÔºü`,
    'Á°ÆËÆ§Â∫îÁî®',
    {
      confirmButtonText: 'Á°ÆÂÆö',
      cancelButtonText: 'ÂèñÊ∂à',
      type: 'info'
    }
  ).then(() => {
    ElMessage.success(`Âª∫ËÆÆ"${suggestion.title}"Â∑≤Â∫îÁî®ÔºÅ`)
  }).catch(() => {
    // Áî®Êà∑ÂèñÊ∂à
  })
}

const dismissSuggestion = (index) => {
  optimizationSuggestions.value.splice(index, 1)
  ElMessage.info('Âª∫ËÆÆÂ∑≤ÂøΩÁï•')
}

const openTool = (type) => {
  const toolNames = {
    title: 'Ê†áÈ¢ò‰ºòÂåñÂô®',
    hashtag: 'Ê†áÁ≠æÊé®Ëçê',
    timing: 'ÂèëÂ∏ÉÊó∂Êú∫ÂàÜÊûê',
    format: 'Ê†ºÂºè‰ºòÂåñ'
  }

  toolDialog.title = toolNames[type]
  toolDialog.type = type
  toolDialog.visible = true

  nextTick(() => {
    if (type === 'timing') {
      initTimingChart()
    }
  })
}

const generateReport = () => {
  ElMessage.info('Ê≠£Âú®ÁîüÊàêÂàÜÊûêÊä•Âëä...')
  // Ê®°ÊãüÁîüÊàêËøáÁ®ã
  setTimeout(() => {
    const newReport = {
      id: analysisReports.value.length + 1,
      title: `ÂÜÖÂÆπÂàÜÊûêÊä•Âëä - ${new Date().toLocaleDateString()}`,
      date: new Date().toLocaleDateString()
    }
    analysisReports.value.unshift(newReport)
    ElMessage.success('ÂàÜÊûêÊä•ÂëäÁîüÊàêÂÆåÊàêÔºÅ')
  }, 2000)
}

const viewReport = (report) => {
  ElMessage.info(`Êü•ÁúãÊä•Âëä: ${report.title}`)
  // ËøôÈáåÂèØ‰ª•ÊâìÂºÄÊä•ÂëäËØ¶ÊÉÖÈ°µÈù¢
}

const downloadReport = (report) => {
  ElMessage.success(`Ê≠£Âú®‰∏ãËΩΩÊä•Âëä: ${report.title}`)
  // ËøôÈáåÂèØ‰ª•ÂÆûÁé∞Êñá‰ª∂‰∏ãËΩΩ
}

const useTitleSuggestion = (suggestion) => {
  ElMessage.success('Â∑≤‰ΩøÁî®‰ºòÂåñÊ†áÈ¢òÔºÅ')
  toolDialog.visible = false
}

const selectHashtag = (tag) => {
  ElMessage.success(`Â∑≤ÈÄâÊã©Ê†áÁ≠æ: #${tag.name}`)
  // ËøôÈáåÂèØ‰ª•Â∞ÜÈÄâ‰∏≠ÁöÑÊ†áÁ≠æÊ∑ªÂä†Âà∞ÂÜÖÂÆπ‰∏≠
}

const getTagType = (popularity) => {
  switch (popularity) {
    case 'ÁÉ≠Èó®': return 'danger'
    case 'Êé®Ëçê': return 'warning'
    default: return 'info'
  }
}

// ÂõæË°®ÂàùÂßãÂåñ
const initCharts = () => {
  nextTick(() => {
    initRadarChart()
    initSentimentChart()
  })
}

const initRadarChart = () => {
  const chartDom = document.querySelector('.radar-chart')
  if (!chartDom) return

  radarChart = echarts.init(chartDom)
  const option = {
    radar: {
      indicator: [
        { name: 'ÂÜÖÂÆπÂê∏ÂºïÂäõ', max: 100 },
        { name: '‰ø°ÊÅØ‰ª∑ÂÄº', max: 100 },
        { name: 'ÂàõÊÑèÁã¨ÁâπÊÄß', max: 100 },
        { name: 'ÁõÆÊ†áÂ•ëÂêàÂ∫¶', max: 100 },
        { name: '‰º†Êí≠ÊΩúÂäõ', max: 100 }
      ]
    },
    series: [{
      type: 'radar',
      data: [{
        value: [
          qualityScores.value.engagement,
          qualityScores.value.value,
          qualityScores.value.creativity,
          qualityScores.value.relevance,
          qualityScores.value.virality
        ],
        name: 'ÂΩìÂâçÂæóÂàÜ',
        areaStyle: {
          color: 'rgba(64, 158, 255, 0.2)'
        },
        lineStyle: {
          color: '#409EFF'
        }
      }]
    }]
  }
  radarChart.setOption(option)
}

const initSentimentChart = () => {
  const chartDom = document.querySelector('.sentiment-chart .chart-container')
  if (!chartDom) return

  sentimentChart = echarts.init(chartDom)
  const option = {
    tooltip: {
      trigger: 'item'
    },
    series: [{
      type: 'pie',
      radius: ['40%', '70%'],
      data: [
        { value: sentimentData.value.positive, name: 'Ê≠£Èù¢ÊÉÖÊÑü', itemStyle: { color: '#67C23A' } },
        { value: sentimentData.value.neutral, name: '‰∏≠ÊÄßÊÉÖÊÑü', itemStyle: { color: '#909399' } },
        { value: sentimentData.value.negative, name: 'Ë¥üÈù¢ÊÉÖÊÑü', itemStyle: { color: '#F56C6C' } }
      ],
      emphasis: {
        itemStyle: {
          shadowBlur: 10,
          shadowOffsetX: 0,
          shadowColor: 'rgba(0, 0, 0, 0.5)'
        }
      }
    }]
  }
  sentimentChart.setOption(option)
}

const initTimingChart = () => {
  const chartDom = document.querySelector('.timing-chart .chart-container')
  if (!chartDom) return

  timingChart = echarts.init(chartDom)
  const option = {
    tooltip: {
      trigger: 'axis'
    },
    xAxis: {
      type: 'category',
      data: ['6:00', '9:00', '12:00', '15:00', '18:00', '21:00', '24:00']
    },
    yAxis: {
      type: 'value',
      name: '‰∫íÂä®Áéá(%)'
    },
    series: [{
      data: [5, 8, 15, 12, 18, 22, 8],
      type: 'line',
      smooth: true,
      areaStyle: {
        color: 'rgba(64, 158, 255, 0.2)'
      },
      lineStyle: {
        color: '#409EFF'
      }
    }]
  }
  timingChart.setOption(option)
}

const updateCharts = () => {
  if (radarChart) {
    radarChart.setOption({
      series: [{
        data: [{
          value: [
            qualityScores.value.engagement,
            qualityScores.value.value,
            qualityScores.value.creativity,
            qualityScores.value.relevance,
            qualityScores.value.virality
          ]
        }]
      }]
    })
  }

  if (sentimentChart) {
    sentimentChart.setOption({
      series: [{
        data: [
          { value: sentimentData.value.positive, name: 'Ê≠£Èù¢ÊÉÖÊÑü' },
          { value: sentimentData.value.neutral, name: '‰∏≠ÊÄßÊÉÖÊÑü' },
          { value: sentimentData.value.negative, name: 'Ë¥üÈù¢ÊÉÖÊÑü' }
        ]
      }]
    })
  }
}

// ÁîüÂëΩÂë®ÊúüÈí©Â≠ê
onMounted(() => {
  initCharts()

  // Ê®°ÊãüÊï∞ÊçÆÊõ¥Êñ∞
  setInterval(() => {
    // Êõ¥Êñ∞ÂàÜÊûêÁªüËÆ°Êï∞ÊçÆ
    analysisStats.value.totalAnalyzed += Math.floor(Math.random() * 5)
    analysisStats.value.insightsGenerated += Math.floor(Math.random() * 3)
  }, 30000)
})
</script>

<style lang="scss" scoped>
@import '@/styles/variables.scss';

.content-analysis {
  .analysis-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;

    .header-left {
      h2 {
        margin: 0 0 8px 0;
        color: $text-primary;
      }
    }

    .header-actions {
      display: flex;
      gap: 12px;
    }
  }

  .analysis-overview {
    margin-bottom: 24px;

    .metric-card {
      height: 120px;

      .metric-content {
        display: flex;
        align-items: center;
        gap: 16px;

        .metric-icon {
          width: 48px;
          height: 48px;
          border-radius: 12px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 24px;

          &.analysis-icon {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
          }

          &.optimization-icon {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
          }

          &.insight-icon {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
          }

          &.performance-icon {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
          }
        }

        .metric-info {
          flex: 1;

          .metric-value {
            font-size: 24px;
            font-weight: 600;
            color: $text-primary;
            margin-bottom: 4px;
          }

          .metric-label {
            color: $text-secondary;
            font-size: 14px;
            margin-bottom: 4px;
          }

          .metric-trend {
            font-size: 12px;
            color: $text-secondary;

            .trend-up {
              color: $success-color;
              font-weight: 600;
            }
          }
        }
      }
    }
  }

  .analysis-content {
    .analysis-card {
      margin-bottom: 20px;

      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;

        h3 {
          margin: 0;
          color: $text-primary;
        }

        .header-actions {
          display: flex;
          gap: 12px;
          align-items: center;
        }
      }

      .quality-analysis {
        .analysis-tabs {
          .score-breakdown {
            display: flex;
            gap: 24px;
            align-items: center;

            .score-chart {
              flex: 1;
              height: 300px;
            }

            .score-details {
              flex: 1;

              .score-item {
                display: flex;
                align-items: center;
                margin-bottom: 16px;

                .label {
                  width: 100px;
                  color: $text-secondary;
                }

                .score-bar {
                  flex: 1;
                  height: 8px;
                  background: $border-base;
                  border-radius: 4px;
                  overflow: hidden;
                  margin: 0 12px;

                  .score-fill {
                    height: 100%;
                    background: linear-gradient(90deg, #409EFF 0%, #67C23A 100%);
                    border-radius: 4px;
                  }
                }

                .value {
                  width: 50px;
                  text-align: right;
                  font-weight: 600;
                  color: $text-primary;
                }
              }
            }
          }

          .keyword-analysis {
            .keyword-cloud {
              display: flex;
              flex-wrap: wrap;
              gap: 16px;
              margin-bottom: 24px;
              padding: 20px;
              background: $bg-color;
              border-radius: 8px;

              .keyword-item {
                cursor: pointer;
                transition: transform 0.2s;

                &:hover {
                  transform: scale(1.1);
                }
              }
            }
          }

          .sentiment-analysis {
            display: flex;
            gap: 24px;

            .sentiment-chart {
              flex: 1;
              height: 300px;
            }

            .sentiment-details {
              flex: 1;

              .sentiment-item {
                display: flex;
                align-items: center;
                padding: 16px;
                border-radius: 8px;
                margin-bottom: 16px;

                &.positive {
                  background: rgba(103, 194, 58, 0.1);
                }

                &.neutral {
                  background: rgba(144, 147, 153, 0.1);
                }

                &.negative {
                  background: rgba(245, 108, 108, 0.1);
                }

                .sentiment-icon {
                  font-size: 24px;
                  margin-right: 16px;
                }

                .sentiment-info {
                  flex: 1;

                  .sentiment-label {
                    font-weight: 600;
                    color: $text-primary;
                    margin-bottom: 4px;
                  }

                  .sentiment-value {
                    font-size: 18px;
                    font-weight: 600;
                    margin-bottom: 4px;
                  }

                  .sentiment-desc {
                    color: $text-secondary;
                    font-size: 14px;
                  }
                }
              }
            }
          }
        }
      }

      .competitor-analysis {
        .competitor-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 20px;

          .competitor-card {
            border: 1px solid $border-base;
            border-radius: 8px;
            padding: 16px;

            .competitor-header {
              display: flex;
              align-items: center;
              margin-bottom: 16px;

              .competitor-avatar {
                width: 48px;
                height: 48px;
                border-radius: 50%;
                margin-right: 12px;
              }

              .competitor-info {
                h4 {
                  margin: 0 0 4px 0;
                  color: $text-primary;
                }

                p {
                  margin: 0;
                  color: $text-secondary;
                  font-size: 14px;
                }
              }
            }

            .competitor-metrics {
              margin-bottom: 16px;

              .metric-row {
                display: flex;
                justify-content: space-between;
                margin-bottom: 8px;
                font-size: 14px;

                .metric-label {
                  color: $text-secondary;
                }

                .metric-value {
                  font-weight: 600;
                  color: $text-primary;
                }
              }
            }

            .competitor-analysis {
              .analysis-item {
                margin-bottom: 12px;

                .analysis-label {
                  font-weight: 600;
                  color: $text-primary;
                  font-size: 14px;
                  margin-bottom: 4px;
                }

                .analysis-value {
                  color: $text-secondary;
                  font-size: 14px;
                  margin: 0;
                }
              }
            }
          }
        }
      }
    }

    .suggestions-card {
      margin-bottom: 20px;

      .suggestions-list {
        .suggestion-item {
          border: 1px solid $border-base;
          border-radius: 8px;
          margin-bottom: 12px;
          overflow: hidden;

          &.high {
            border-left: 4px solid $danger-color;
          }

          &.medium {
            border-left: 4px solid $warning-color;
          }

          &.low {
            border-left: 4px solid $info-color;
          }

          .suggestion-header {
            display: flex;
            align-items: center;
            padding: 12px;
            background: $bg-color;

            .suggestion-icon {
              margin-right: 12px;
              color: $primary-color;
            }

            .suggestion-title {
              flex: 1;

              h4 {
                margin: 0 0 4px 0;
                color: $text-primary;
                font-size: 14px;
              }

              .suggestion-type {
                color: $text-secondary;
                font-size: 12px;
              }
            }
          }

          .suggestion-content {
            padding: 12px;

            p {
              margin: 0 0 12px 0;
              color: $text-secondary;
              font-size: 14px;
            }

            .suggestion-impact {
              display: flex;
              align-items: center;
              gap: 8px;

              .impact-label {
                color: $text-secondary;
                font-size: 12px;
              }

              .impact-meter {
                flex: 1;
                height: 6px;
                background: $border-base;
                border-radius: 3px;
                overflow: hidden;

                .impact-fill {
                  height: 100%;
                  background: linear-gradient(90deg, #409EFF 0%, #67C23A 100%);
                }
              }

              .impact-value {
                font-weight: 600;
                color: $text-primary;
                font-size: 12px;
                min-width: 40px;
                text-align: right;
              }
            }
          }

          .suggestion-actions {
            display: flex;
            gap: 8px;
            padding: 12px;
            background: $bg-color;
            border-top: 1px solid $border-base;
          }
        }
      }
    }

    .tools-card {
      margin-bottom: 20px;

      .tools-list {
        .tool-item {
          display: flex;
          align-items: center;
          padding: 16px;
          border-radius: 8px;
          cursor: pointer;
          transition: background-color 0.2s;

          &:hover {
            background: $bg-color;
          }

          .tool-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-right: 12px;
          }

          .tool-info {
            h4 {
              margin: 0 0 4px 0;
              color: $text-primary;
              font-size: 14px;
            }

            p {
              margin: 0;
              color: $text-secondary;
              font-size: 12px;
            }
          }
        }
      }
    }

    .report-card {
      .report-list {
        .report-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 12px;
          border-bottom: 1px solid $border-base;

          &:last-child {
            border-bottom: none;
          }

          .report-info {
            h4 {
              margin: 0 0 4px 0;
              color: $text-primary;
              font-size: 14px;
            }

            p {
              margin: 0;
              color: $text-secondary;
              font-size: 12px;
            }
          }
        }
      }
    }
  }

  .tool-content {
    .title-optimizer,
    .hashtag-recommender,
    .format-optimizer {
      .optimization-results,
      .hashtag-results,
      .format-recommendations {
        margin-top: 24px;
        padding-top: 24px;
        border-top: 1px solid $border-base;

        h4 {
          margin: 0 0 16px 0;
          color: $text-primary;
        }

        .suggestion-list {
          .title-suggestion {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            border: 1px solid $border-base;
            border-radius: 8px;
            margin-bottom: 12px;

            .suggestion-text {
              flex: 1;
              font-size: 14px;
              color: $text-primary;
            }

            .suggestion-score {
              margin: 0 12px;
              font-weight: 600;
              color: $primary-color;
            }
          }
        }

        .hashtag-cloud {
          display: flex;
          flex-wrap: wrap;
          gap: 8px;

          .hashtag-tag {
            cursor: pointer;
            transition: transform 0.2s;

            &:hover {
              transform: scale(1.05);
            }

            .tag-popularity {
              margin-left: 4px;
              font-size: 12px;
            }
          }
        }

        .format-tips {
          .format-tip {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            border: 1px solid $border-base;
            border-radius: 8px;
            margin-bottom: 12px;

            .tip-icon {
              margin-right: 12px;
              color: $primary-color;
              margin-top: 2px;
            }

            .tip-content {
              flex: 1;

              h5 {
                margin: 0 0 4px 0;
                color: $text-primary;
                font-size: 14px;
              }

              p {
                margin: 0;
                color: $text-secondary;
                font-size: 13px;
              }
            }
          }
        }
      }
    }

    .timing-analyzer {
      .timing-chart {
        height: 300px;
        margin-bottom: 24px;
      }

      .timing-recommendations {
        .time-slots {
          .time-slot {
            padding: 16px;
            border: 1px solid $border-base;
            border-radius: 8px;
            margin-bottom: 12px;

            .time {
              font-size: 16px;
              font-weight: 600;
              color: $text-primary;
              margin-bottom: 4px;
            }

            .engagement {
              color: $success-color;
              font-weight: 600;
              margin-bottom: 4px;
            }

            .reason {
              color: $text-secondary;
              font-size: 14px;
            }
          }
        }
      }
    }
  }
}

.trend-up {
  color: $success-color;
}

.trend-down {
  color: $danger-color;
}
</style>